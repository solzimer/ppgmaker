{"version":3,"sources":["../src/app.js","../src/controllers/films.js","../src/controllers/scene.js","../src/directives/ppg-carousel.js","../src/directives/ppg-draggable.js","../src/directives/ppg-effects.js","../src/directives/ppg-flip.js","../src/directives/ppg-play.js","../src/directives/ppg-record.js","../src/directives/ppg-resizable.js","../src/directives/ppg-trash.js","../src/filters/imagesizeFilter.js","../src/services/itemsService.js","../src/services/sceneService.js","../src/services/styleService.js"],"names":[],"mappings":"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","file":"app.es6.js","sourcesContent":["angular.module('ppgmaker', ['ui.bootstrap','ui.router']).\r\nconfig(function($stateProvider,$urlRouterProvider) {\r\n  $stateProvider.state(\"home\",{\r\n\t\turl: '/home',\r\n\t  template: '<h3>hello world!</h3>'\r\n\t});\r\n\r\n\t$stateProvider.state(\"films\",{\r\n\t\turl: '/films',\r\n\t\tcontroller : 'FilmsController',\r\n\t  templateUrl: 'views/films.html'\r\n\t});\r\n\r\n  $stateProvider.state(\"scene\",{\r\n\t\turl: '/scene/:id',\r\n\t\tcontroller : 'SceneController',\r\n\t  templateUrl: 'views/scene.html'\r\n\t});\r\n\r\n\t$urlRouterProvider.otherwise(\"/films\");\r\n\r\n\tconsole.log(\"App started!\");\r\n\r\n});\r\n","angular.module('ppgmaker').\r\ncontroller(\"FilmsController\",function($scope,$element,$interval,$q,sceneService){\r\n\t$scope.films = [];\r\n\r\n\tfunction init() {\r\n\t\tsceneService.allFilms().then(films=>{\r\n\t\t\t$scope.films = films;\r\n\t\t});\r\n\t}\r\n\r\n\tinit();\r\n});\r\n","angular.module('ppgmaker').\r\ncontroller(\"SceneController\",function($scope,$stateParams,$element,$interval,$q,itemsService,sceneService){\r\n\tvar MAX = 5;\r\n\tvar MAX_TIME = 30000;\r\n\tvar recordTimeout = null;\r\n\tvar elemScene = $(\".scene\",$element).get(0);\r\n\tvar canvas = document.createElement(\"canvas\");\r\n\r\n\t$scope.addDisabled = false;\r\n\t$scope.record = false;\r\n\t$scope.play = -1;\r\n\t$scope.time = 0;\r\n\t$scope.film = null;\r\n\t$scope.scene = null;\r\n\r\n\tfunction init() {\r\n\t\titemsService.get().then(items=>{\r\n\t\t\t$scope.allitems = items;\r\n\t\t\tconsole.log(items);\r\n\t\t});\r\n\r\n\t\t$scope.$watchCollection(\"scene.items\",items=>{\r\n\t\t\t$scope.addDisabled = !items || items.length>=MAX;\r\n\t\t});\r\n\r\n\t\tsceneService.findFilm({_id:$stateParams.id}).then(film=>{\r\n\t\t\tif(!film) return sceneService.newFilm({name:\"testppg\"}).save();\r\n\t\t\telse return film;\r\n\t\t}).then(film=>{\r\n\t\t\t$scope.film = film;\r\n\t\t}).catch(err=>{\r\n\t\t\tconsole.error(err);\r\n\t\t});\r\n\r\n\t\tsetupBars();\r\n\t}\r\n\r\n\tfunction setupBars() {\r\n\t\tlet mc = new Hammer($element[0]);\r\n\t\tmc.on(\"tap\",evt=>{\r\n\t\t\tlet frame = $(evt.target).closest(\".frame-bottom\");\r\n\t\t\tif(frame.length) {\r\n\t\t\t\tif(frame.is(\".hide-down\"))\r\n\t\t\t\t\tframe.removeClass(\"hide-down\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$(\".frame-bottom\",$element).each((i,el)=>{\r\n\t\t\t\t\tif(!$(el).is((\".hide-down\")))\r\n\t\t\t\t\t\t$(el).addClass(\"hide-down\");\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction resizeImage(img) {\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\t\tcanvas.height = 100;\r\n\t\tcanvas.width = img.width*canvas.height/img.height;\r\n\t\tctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\t\treturn canvas.toDataURL();\r\n\t}\r\n\r\n\tfunction resetBuffers() {\r\n\t\t$scope.scene.items.forEach(item => {\r\n\t\t\titem.buffer.splice(0,item.buffer.length);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction startRecord() {\r\n\t\tresetBuffers();\r\n\t\t$scope.time = 0;\r\n\t\tvar ti = Date.now();\r\n\t\trecordTimeout = $interval(()=>{\r\n\t\t\tvar tn = Date.now() - ti;\r\n\t\t\t$scope.time = tn*100/MAX_TIME;\r\n\t\t\tif(tn>=MAX_TIME) stopRecord();\r\n\t\t},1000);\r\n\t}\r\n\r\n\tfunction stopRecord() {\r\n\t\t$scope.record = false;\r\n\t\t$interval.cancel(recordTimeout);\r\n\r\n\t\treturn $q(res=>html2canvas(elemScene,{onrendered:res})).\r\n\t\t\tthen(canvas=>resizeImage(canvas)).\r\n\t\t\tthen(img=>$scope.scene.screenshot=img).\r\n\t\t\tthen(()=>$scope.scene.save()).\r\n\t\t\tthen(()=>$scope.film.update($scope.scene,true)).\r\n\t\t\tcatch(err=>console.log(err.message));\r\n\t}\r\n\r\n\t$scope.newScene = function() {\r\n\t\t$scope.film.add({name:\"New Scene\"}).\r\n\t\t\tthen(scene=>$scope.scene = scene);\r\n\t}\r\n\r\n\t$scope.setBackground = function(item) {\r\n\t\tif(!$scope.record)\r\n\t\t\t$scope.scene.background = item;\r\n\t}\r\n\r\n\t$scope.addItem = function(item) {\r\n\t\tif(!$scope.addDisabled) {\r\n\t\t\titem = JSON.parse(JSON.stringify(item));\r\n\t\t\t$scope.scene.items.push(item);\r\n\t\t}\r\n\t}\r\n\r\n\t$scope.toggleRecord = function() {\r\n\t\t$scope.record = !$scope.record;\r\n\r\n\t\tif($scope.record)\tstartRecord();\r\n\t\telse stopRecord()\r\n\t}\r\n\r\n\t$scope.togglePlay = function() {\r\n\t\t$scope.play = $scope.play? 0 : -1;\r\n\t}\r\n\r\n\t$scope.selectScene = function(scene) {\r\n\t\tscene.fetch().then(res=>$scope.scene = res);\r\n\t}\r\n\r\n\t$scope.backScene = function() {\r\n\t\tstopRecord().then(()=>{\r\n\t\t\t$scope.play = -1;\r\n\t\t\t$scope.scene = null;\r\n\t\t});\r\n\t}\r\n\r\n\tinit();\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgCarousel\",function($timeout,styleService){\r\n\tvar uid = 0;\r\n\r\n\tfunction link(scope, element, attrs) {\r\n\t\tscope.$watchCollection(()=>{\r\n\t\t\treturn scope.$eval(element.attr(\"ppg-carousel\"));\r\n\t\t},items=>{\r\n\t\t\tif(items && items.length) {\r\n\t\t\t\t$timeout(()=>{\r\n\t\t\t\t\t$(element).slick({\r\n\t\t\t\t\t\tmobileFirst : true,\r\n\t\t\t\t\t\tarrows: false,\r\n\t\t\t\t\t\tslidesToScroll: 5,\r\n\t\t\t\t\t\tvariableWidth: true,\r\n\t\t\t\t\t\tinfinite: false\r\n\t\t\t\t\t});\r\n\t\t\t\t},10);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tscope.$on(\"destroy\",()=>{\r\n\t\t\t$(element).slick('unslick');\r\n\t\t})\r\n\t}\r\n\r\n\treturn {\r\n\t\tlink : link,\r\n\t}\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgDraggable\",function(styleService) {\r\n\tvar DRG = \"hammer_drag\";\r\n\r\n\tfunction handleDrag(ev) {\r\n\t\tvar elem = $(ev.target);\r\n\r\n\t\tif (!elem.data(DRG)) {\r\n\t\t\telem.data(DRG,elem.position());\r\n\t\t}\r\n\r\n\t\tvar oldPos = elem.data(DRG);\r\n\t\tvar posX = ev.deltaX + oldPos.left;\r\n\t\tvar posY = ev.deltaY + oldPos.top;\r\n\t\tvar newPos = {left:posX,top:posY};\r\n\r\n\t\telem.css(newPos);\r\n\t\tstyleService.set(elem,newPos);\r\n\r\n\t\tif (ev.isFinal) {\r\n\t\t\telem.data(DRG,null);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction link(scope,elem,attrs) {\r\n\t\tvar mc = new Hammer(elem[0]);\r\n\t\tmc.add( new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 0 }) );\r\n\t\tmc.on(\"pan\", handleDrag);\r\n\t}\r\n\r\n\treturn {\r\n\t\tlink : link\r\n\t}\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgEffects\",function(styleService){\r\n\tvar max = 360;\r\n\tvar frame = 0;\r\n\tvar uid = 0;\r\n\tvar items = {};\r\n\tvar frames = [];\r\n\r\n\tfunction init() {\r\n\t\tfor(var i=0;i<max;i++) {\r\n\t\t\tframes[i] = Math.sin(i*Math.PI/180) - 0.5;\r\n\t\t}\r\n\r\n\t\tframes.push(frames[0]);\r\n\t\tfor(var i=0;i<max;i++) {\r\n\t\t\tframes[i] = frames[(i+1)%(max+1)] - frames[i];\r\n\t\t}\r\n\t\tframes.pop();\r\n\t}\r\n\r\n\tfunction applyEffects() {\r\n\t\trequestAnimationFrame(applyEffects);\r\n\t\tfor(var id in items) {\r\n\t\t\tvar item = items[id];\r\n\t\t\tvar play = item.scope.$eval(\"play\");\r\n\t\t\tif(play<0) {\r\n\t\t\t\tvar elem = $(item.element.get(0));\r\n\t\t\t\tvar pos = elem.position();\r\n\t\t\t\tpos.top += frames[(frame+item.initial)%max]*10;\r\n\t\t\t\telem.css(pos);\r\n\t\t\t\tstyleService.set(elem,pos);\r\n\t\t\t}\r\n\t\t}\r\n\t\tframe = (frame+5) % max;\r\n\t}\r\n\r\n\tfunction link(scope, element, attrs) {\r\n\t\tvar id = \"drag_\"+(uid++);\r\n\r\n\t\tscope.$on(\"$destroy\",function(){\r\n\t\t\tdelete items[id];\r\n\t\t});\r\n\r\n\t\titems[id] = {\r\n\t\t\tinitial:Math.floor(Math.random()*max),\r\n\t\t\tscope:scope,\r\n\t\t\telement:element,\r\n\t\t};\r\n\t}\r\n\r\n\tinit();\r\n\trequestAnimationFrame(applyEffects);\r\n\treturn {\r\n\t\tlink : link,\r\n\t}\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgFlip\",function(styleService) {\r\n\tconst CLASS = \"ppg-flip-style\";\r\n\r\n\tfunction handleTap(ev) {\r\n\t\tvar elem = $(ev.target);\r\n\t\telem.toggleClass(CLASS);\r\n\r\n\t\tlet flip = elem.is(`.${CLASS}`)? \"scaleX(-1)\" : \"none\";\r\n\t\tlet tr = {transform:flip};\r\n\t\tstyleService.set(elem,tr);\r\n\t\telem.css(tr);\r\n\t}\r\n\r\n\tfunction link(scope,elem,attrs) {\r\n\t\tvar mc = new Hammer(elem[0]);\r\n\t\tmc.on(\"tap\", handleTap);\r\n\t}\r\n\r\n\treturn {\r\n\t\tlink : link\r\n\t}\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgPlay\",function(styleService) {\r\n\tvar items = {};\r\n\r\n\tfunction animate() {\r\n\t\trequestAnimationFrame(animate);\r\n\t\tfor(key in items) {\r\n\t\t\tvar item = items[key];\r\n\t\t\tif(item.frame>=0) {\r\n\t\t\t\tvar style = item.buffer[item.frame];\r\n\t\t\t\tif(style) {\r\n\t\t\t\t\t$(item.elem).css(style);\r\n\t\t\t\t\titem.frame++;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\titem.frame = -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getId(el) {\r\n\t\tif(!el.attr(\"id\")) el.attr(\"id\",\"ppgplay_\"+(uid++));\r\n\t\treturn el.attr(\"id\");\r\n\t}\r\n\r\n\tfunction link(scope,element,attrs) {\r\n\t\tscope.$watch(\"ppgPlay\",function(frame) {\r\n\t\t\tvar elems = document.querySelectorAll(\"[ppg-record]\",element);\r\n\t\t\telems.forEach(function(el){\r\n\t\t\t\tel = angular.element(el);\r\n\t\t\t\tvar id = styleService.id(el);\r\n\t\t\t\tvar buffer = el.scope().$eval(el.attr(\"ppg-record\"));\r\n\t\t\t\titems[id] = {frame:frame, elem:el, buffer:buffer}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tscope.$on(\"$destroy\",function(){\r\n\t\t\tvar elems = document.querySelectorAll(\"[ppg-record]\",element);\r\n\t\t\telems.forEach(function(el){\r\n\t\t\t\tel = angular.element(el);\r\n\t\t\t\tvar id = styleService.id(el);\r\n\t\t\t\tdelete items[id];\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trequestAnimationFrame(animate);\r\n\treturn {\r\n\t\tlink : link,\r\n\t\tscope : {\r\n\t\t\tppgPlay : \"=\"\r\n\t\t}\r\n\t}\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgRecord\",function($interval,styleService){\r\n\tvar uid = 0;\r\n\tvar items = {};\r\n\r\n\tfunction diff(prev,next) {\r\n\t\tif(!prev) return next;\r\n\r\n\t\tvar map = new Set();\r\n\t\tvar ret = {};\r\n\r\n\t\tObject.keys(prev).forEach(k=>map.add(k));\r\n\t\tObject.keys(next).forEach(k=>map.add(k));\r\n\t\tArray.from(map).forEach(k=>{\r\n\t\t\tlet pk = prev[k], nk = next[k];\r\n\t\t\tif(\t(pk===undefined && nk!==undefined) ||\r\n\t\t\t\t\t(pk!==undefined && nk!==undefined && pk!=nk) ) {\r\n\t\t\t\tret[k] = nk;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tfunction recordItems() {\r\n\t\trequestAnimationFrame(recordItems);\r\n\t\tfor(var id in items) {\r\n\t\t\tvar item = items[id];\r\n\t\t\tvar record = item.scope.$eval(\"record\");\r\n\t\t\tif(record) {\r\n\t\t\t\tvar next = styleService.get(item.element);\r\n\t\t\t\tvar prev = item.buffer[item.buffer.length-1] || undefined;\r\n\t\t\t\titem.buffer.push(diff(prev,next));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction link(scope, element, attrs) {\r\n\t\tvar id = \"drag_\"+(uid++);\r\n\t\tvar buffer = scope.$eval(attrs.ppgRecord);\r\n\r\n\t\tif(!buffer) buffer = [];\r\n\t\tif(buffer.length)\r\n\t\t\t$(element).css(buffer[0]);\r\n\r\n\t\tscope.$on(\"$destroy\",function(){\r\n\t\t\tdelete items[id];\r\n\t\t});\r\n\r\n\t\titems[id] = {\r\n\t\t\tscope:scope,\r\n\t\t\telement:element,\r\n\t\t\tbuffer:buffer\r\n\t\t};\r\n\t}\r\n\r\n\trequestAnimationFrame(recordItems);\r\n\treturn {\r\n\t\tlink : link,\r\n\t}\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgResizable\",function(styleService) {\r\n\tvar DRG = \"hammer_drag\";\r\n\r\n\tfunction handleDrag(ev) {\r\n\t\tvar elem = $(ev.target);\r\n\r\n\t\tif (!elem.data(DRG)) {\r\n\t\t\telem.data(DRG,elem.position());\r\n\t\t}\r\n\r\n\t\tvar oldPos = elem.data(DRG);\r\n\t\tvar posX = ev.deltaX + oldPos.left;\r\n\t\tvar posY = ev.deltaY + oldPos.top;\r\n\t\tvar newPos = {left:posX,top:posY};\r\n\r\n\t\telem.css(newPos);\r\n\t\tstyleService.set(elem,newPos);\r\n\r\n\t\tif (ev.isFinal) {\r\n\t\t\telem.data(DRG,null);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction link(scope,elem,attrs) {\r\n\t\tvar mc = new Hammer(elem[0]);\r\n\t\tmc.add( new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 0 }) );\r\n\t\tmc.on(\"pan\", handleDrag);\r\n\t}\r\n\r\n\treturn {\r\n\t\tlink : link\r\n\t}\r\n});\r\n","angular.module('ppgmaker').directive(\"ppgTrash\",function(styleService) {\r\n\tfunction overlap(rect1,rect2) {\r\n\t\treturn !(\r\n\t\t\trect1.right < rect2.left ||\r\n\t\t\trect1.left > rect2.right ||\r\n\t\t\trect1.bottom < rect2.top ||\r\n\t\t\trect1.top > rect2.bottom\r\n\t\t);\r\n\t}\r\n\r\n\tfunction link(scope,elem,attrs) {\r\n\t\tlet box = elem[0].getBoundingClientRect();\r\n\t\tlet fn = function() {\r\n\t\t\trequestAnimationFrame(fn);\r\n\t\t\tlet model = styleService.model;\r\n\t\t\tlet ret = Object.keys(model).some(id=>{\r\n\t\t\t\tlet elem = document.getElementById(id);\r\n\t\t\t\tlet ebox = elem.getBoundingClientRect();\r\n\t\t\t\treturn overlap(box,ebox);\r\n\t\t\t});\r\n\t\t\tif(ret) $(elem).addClass(\"overlap\");\r\n\t\t\telse $(elem).removeClass(\"overlap\");\r\n\t\t}\r\n\t\tfn();\r\n\t}\r\n\r\n\treturn {\r\n\t\tlink : link,\r\n\t\tscope : {\r\n\t\t\tppgTrash : \"=\"\r\n\t\t}\r\n\t}\r\n});\r\n","angular.module(\"ppgmaker\").\r\nfilter(\"imgsrc\",function(){\r\n\treturn function(input,size) {\r\n\t\tlet src = input.src;\r\n\t\tif(input[size]) {\r\n\t\t\tlet path = src.split(\"/\");\r\n\t\t\tlet file = path.pop();\r\n\t\t\tpath.push(input[size]);\r\n\t\t\tpath.push(file);\r\n\t\t\treturn path.join(\"/\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn input.src;\r\n\t\t}\r\n\t}\r\n});\r\n","angular.module(\"ppgmaker\").service(\"itemsService\",function($http){\r\n\tvar prModel = false;\r\n\tvar self = this;\r\n\r\n\tthis.model = {};\r\n\r\n\tthis.get = function() {\r\n\t\tif(!prModel) {\r\n\t\t\tprModel = $http.\r\n\t\t\t\tget(\"data/allitems.json\").\r\n\t\t\t\tthen(function(res){\r\n\t\t\t\t\tangular.extend(self.model,res.data);\r\n\t\t\t\t\treturn self.model;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn prModel;\r\n\t}\r\n});\r\n","angular.module(\"ppgmaker\").service(\"sceneService\",function($q){\r\n\tvar self = this;\r\n\tvar filmCol, sceneCol;\r\n\r\n\tthis.model = {};\r\n\r\n\tfunction q() {\r\n\t\treturn $q.resolve($q);\r\n\t}\r\n\r\n\tfunction del(id) {\r\n\t\treturn {_id:id,_deleted:true}\r\n\t}\r\n\r\n\tclass Scene {\r\n\t\tconstructor(props,mini) {\r\n\t\t\tthis.extend(props,mini);\r\n\t\t}\r\n\r\n\t\textend(props,mini) {\r\n\t\t\tprops = props || {};\r\n\t\t\tthis._id = props._id || \"scene_\"+Date.now();\r\n\t\t\tthis._rev = props._rev;\r\n\t\t\tthis.name = props.name || \"\";\r\n\t\t\tthis.frames = props.frames || 0;\r\n\t\t\tthis.background = props.background || \"\";\r\n\t\t\tthis.screenshot = props.screenshot || \"\";\r\n\r\n\t\t\tif(!mini) {\r\n\t\t\t\tthis.items = props.items || [];\r\n\t\t\t\tthis.idfilm = props.idfilm || \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmini() {\r\n\t\t\treturn new Scene(this,true);\r\n\t\t}\r\n\r\n\t\tfetch() {\r\n\t\t\treturn q().then(()=>sceneCol.get(this._id)).then(res=>new Scene(res));\r\n\t\t}\r\n\r\n\t\tsave() {\r\n\t\t\treturn q().then(()=>sceneCol.put(this)).then(res=>this);\r\n\t\t}\r\n\r\n\t\tremove() {\r\n\t\t\treturn q().then(()=>sceneCol.remove(this)).then(res=>this);\r\n\t\t}\r\n\t}\r\n\r\n\tclass Film {\r\n\t\tconstructor(props) {\r\n\t\t\tprops = props || {};\r\n\t\t\tthis._id = props._id || \"film_\"+Date.now();\r\n\t\t\tthis._rev = props._rev;\r\n\t\t\tthis.name = props.name || \"\";\r\n\t\t\tthis.scenes = (props.scenes || []).map(scn=>new Scene(scn,true));\r\n\t\t}\r\n\r\n\t\tfind(scene) {\r\n\t\t\tlet id = scene._id || scene;\r\n\t\t\treturn q().then(()=>this.scenes.find(scn=>scn._id==id));\r\n\t\t}\r\n\r\n\t\tadd(scene) {\r\n\t\t\tscene = scene || {};\r\n\t\t\tscene.idfilm = this._id;\r\n\t\t\tif(!scene._id) scene = new Scene(scene);\r\n\r\n\t\t\treturn q().\r\n\t\t\t\tthen(()=>scene.save()).\r\n\t\t\t\tthen(scene=>{\r\n\t\t\t\t\tthis.scenes.push(scene.mini());\r\n\t\t\t\t\treturn this.save();\r\n\t\t\t\t}).\r\n\t\t\t\tthen(res=>scene);\r\n\t\t}\r\n\r\n\t\tremove(scene) {\r\n\t\t\treturn q().\r\n\t\t\t\tthen(()=>scene.remove()).\r\n\t\t\t\tthen(scene=>{\r\n\t\t\t\t\tlet idx = this.scenes.findIndex(scn=>scn._id==scene._id);\r\n\t\t\t\t\tthis.scenes.splice(idx,1);\r\n\t\t\t\t\treturn this.save();\r\n\t\t\t\t}).\r\n\t\t\t\tthen(res=>scene);\r\n\t\t}\r\n\r\n\t\tupdate(scene,save) {\r\n\t\t\treturn q().\r\n\t\t\t\t\tthen(()=>this.find(scene).extend(scene,true)).\r\n\t\t\t\t\tthen(()=>{\r\n\t\t\t\t\t\tif(save) return this.save();\r\n\t\t\t\t\t\telse return this;\r\n\t\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tsave() {\r\n\t\t\tthis.scenes = this.scenes.map(scn=>scn.mini());\r\n\t\t\treturn q().then(()=>filmCol.put(this)).then(res=>this);\r\n\t\t}\r\n\r\n\t\tdrop() {\r\n\t\t\treturn q().\r\n\t\t\t\tthen(()=>sceneCol.bulkDocs(this.idscenes.map(del))).\r\n\t\t\t\tthen(res=>filmCol.remove(this)).\r\n\t\t\t\tthen(res=>this);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction init() {\r\n\t\tfilmCol = new PouchDB('ppgmaker_films');\r\n\t\tsceneCol = new PouchDB('ppgmaker_scenes');\r\n\t}\r\n\r\n\tthis.newFilm = function(film) {\r\n\t\treturn new Film(film);\r\n\t}\r\n\r\n\tthis.allFilms = function() {\r\n\t\treturn q().\r\n\t\t\tthen(()=>filmCol.allDocs({include_docs: true})).\r\n\t\t\tthen(list=>list.rows.map(elem=>elem.doc)).\r\n\t\t\tthen(docs=>docs.filter(doc=>doc.name)).\r\n\t\t\tthen(docs=>docs.map(doc=>new Film(doc)));\r\n\t}\r\n\r\n\tthis.getFilm = function(id) {\r\n\t\treturn q().\r\n\t\t\tthen(()=>filmCol.get(id)).\r\n\t\t\tthen(film=>new Film(film));\r\n\t}\r\n\r\n\tthis.findFilm = function(query) {\r\n\t\treturn q().\r\n\t\t\tthen(()=>filmCol.createIndex({index: {fields: ['name']}})).\r\n\t\t\tthen(res => filmCol.find({selector: query})).\r\n\t\t\tthen(res => res.docs[0]).\r\n\t\t\tthen(film => film? new Film(film) : null);\r\n\t}\r\n\r\n\tthis.newScene = function(film,scene) {\r\n\t\tscene = scene || {};\r\n\t\tscene.idfilm = film.id;\r\n\t\treturn new Scene(scene);\r\n\t}\r\n\r\n\tinit();\r\n});\r\n","angular.module(\"ppgmaker\").service(\"styleService\",function(){\r\n\tvar self = this;\r\n\tvar uid = 0;\r\n\r\n\tthis.model = {};\r\n\r\n\tfunction elemId(elem) {\r\n\t\tif(typeof(elem)==\"string\") return elem;\r\n\t\telse {\r\n\t\t\telem = $(elem);\r\n\t\t\tif(!elem.attr(\"id\"))\r\n\t\t\t\telem.attr(\"id\",\"_ppgm_\"+(uid++));\r\n\t\t\treturn elem.attr(\"id\");\r\n\t\t}\r\n\t}\r\n\r\n\tthis.id = function(elem) {\r\n\t\treturn elemId(elem);\r\n\t}\r\n\r\n\tthis.get = function(id) {\r\n\t\tid = elemId(id);\r\n\t\treturn angular.extend({},this.model[id] || {});\r\n\t}\r\n\r\n\tthis.set = function(id,props) {\r\n\t\tid = elemId(id);\r\n\t\tif(!this.model[id]) this.model[id] = {};\r\n\t\tangular.extend(this.model[id],props);\r\n\t}\r\n\r\n\tthis.unset = function(id,props) {\r\n\t\tid = elemId(id);\r\n\t\tif(this.model[id]) {\r\n\t\t\tvar style = this.model[id];\r\n\t\t\tfor(var i in props) {\r\n\t\t\t\tdelete style[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tthis.remove = function(id) {\r\n\t\tid = elemId(id);\r\n\t\tdelete this.model[id];\r\n\t}\r\n});\r\n"]}