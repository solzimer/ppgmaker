{"version":3,"sources":["../src/app.js","../src/controllers/films.js","../src/controllers/player.js","../src/controllers/scene.js","../src/directives/ppg-carousel.js","../src/directives/ppg-draggable.js","../src/directives/ppg-effects.js","../src/directives/ppg-flip.js","../src/directives/ppg-overlap.js","../src/directives/ppg-play.js","../src/directives/ppg-record.js","../src/directives/ppg-resizable.js","../src/filters/imagesizeFilter.js","../src/model/templates.js","../src/services/itemsService.js","../src/services/sceneService.js","../src/services/screenshotService.js","../src/services/soundService.js","../src/services/styleService.js"],"names":[],"mappings":"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MAAM,CAAC,EAAE,CAAC,IAAI,GAAG,QAAQ,IAAI,CAAC,QAAQ,GAAG,QAAQ,IAAI,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,IAAI,GAAG,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,OAAO,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,IAAI,GAAG,MAAM,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,GAAG,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE;AACp8B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,IAAI,GAAG,KAAK,KAAK,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;AACnd,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,KAAK,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,MAAM,EAAE,CAAC,EAAE,CAAC,IAAI,GAAG,KAAK,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,IAAI,GAAG,KAAK,EAAE,CAAC,EAAE,CAAC,KAAK,GAAG,YAAY,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,KAAK,KAAK,EAAE,CAAC,MAAM,GAAG,MAAM,EAAE,EAAE,CAAC,KAAK,EAAE,MAAM,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,MAAM,EAAE,CAAC,EAAE,CAAC,IAAI,GAAG,KAAK,EAAE,CAAC,EAAE,CAAC,KAAK,GAAG,UAAU,MAAM,CAAC,CAAC,KAAK,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,KAAK,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,IAAI,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC,CA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","file":"app.es6.js","sourcesContent":["angular.module('ppgmaker', ['ui.bootstrap','ui.router']).\nconfig(function($stateProvider,$urlRouterProvider,templateProvider) {\n\n  $stateProvider.state(\"home\",{\n\t\turl: '/home',\n\t  template: '<h3>hello world!</h3>'\n\t});\n\n\t$stateProvider.state(\"films\",{\n\t\turl: '/films',\n\t\tcontroller : 'FilmsController',\n\t  template: templateProvider.films\n\t});\n\n  $stateProvider.state(\"film\",{\n\t\turl: '/film/:id',\n\t\tcontroller : 'SceneController',\n\t  template: templateProvider.scene\n\t});\n\n\t$stateProvider.state(\"player\",{\n\t\turl: '/player/:id',\n\t\tcontroller : 'PlayerController',\n\t  template: templateProvider.player\n\t});\n\n\t$stateProvider.state(\"sound\",{\n\t\turl: '/sound',\n\t\tcontroller : 'SoundController',\n\t  template: templateProvider.sound\n\t});\n\n\t$urlRouterProvider.otherwise(\"/films\");\n\n\tconsole.log(\"App started!\");\n\n});\n","angular.module('ppgmaker').\ncontroller(\"FilmsController\",function($scope,$element,$interval,$q,sceneService){\n\t$scope.films = [];\n\n\tfunction init() {\n\t\tsceneService.allFilms().then(films=>{\n\t\t\t$scope.films = films;\n\t\t});\n\t}\n\n\tinit();\n});\n","angular.module('ppgmaker').\ncontroller(\"PlayerController\",function($scope,$stateParams,$state,$timeout,sceneService){\n\tvar idx = 0;\n\tvar watch = null;\n\n\t$scope.play = -1;\n\t$scope.film = null;\n\t$scope.scene = null;\n\n\tfunction init() {\n\t\tsceneService.getFilm($stateParams.id).then(film=>{\n\t\t\t$scope.film = film;\n\t\t\tplay(true);\n\t\t}).catch(err=>{\n\t\t\tconsole.error(err);\n\t\t});\n\t}\n\n\tfunction makeWatch() {\n\t\treturn $scope.$watch(\"play\",(val,old)=>{\n\t\t\tif(val!=old && val==-1) {\n\t\t\t\tidx++;\n\t\t\t\tplay();\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction play(start) {\n\t\tif(start) {\n\t\t\tif(watch) watch();\n\t\t\telse watch = makeWatch();\n\t\t}\n\n\t\tlet scene = $scope.film.scenes[idx];\n\t\tif(!scene) return stop();\n\t\telse return scene.fetch().\n\t\t\tthen(res=>$scope.scene = res).\n\t\t\tthen(res=>new Promise(resolve=>$timeout(resolve,10))).\n\t\t\tthen(res=>$scope.play = 0).\n\t\t\tcatch(err=>{\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\tfunction stop() {\n\t\tif(watch) watch();\n\t\tidx = 0;\n\t\t$scope.play = -1;\n\t}\n\n\tinit();\n});\n","angular.module('ppgmaker').\ncontroller(\"SceneController\",function(\n\t$scope,$q,$stateParams,$element,$interval,\n\tscreenshotService,styleService,soundService,itemsService,sceneService){\n\tvar MAX = 5;\n\tvar MAX_TIME = 30000;\n\tvar recordTimeout = null;\n\tvar elemScene = $(\".scene\",$element).get(0);\n\n\t$scope.addDisabled = false;\n\t$scope.record = false;\n\t$scope.play = -1;\n\t$scope.time = 0;\n\t$scope.film = null;\n\t$scope.scene = null;\n\n\tfunction init() {\n\t\titemsService.get().then(items=>{\n\t\t\t$scope.allitems = items;\n\t\t\tconsole.log(items);\n\t\t});\n\n\t\t$scope.$watchCollection(\"scene.items\",items=>{\n\t\t\t$scope.addDisabled = !items || items.length>=MAX;\n\t\t});\n\n\t\tsceneService.findFilm({_id:$stateParams.id}).then(film=>{\n\t\t\tif(!film) return sceneService.newFilm({name:\"testppg\"}).save();\n\t\t\telse return film;\n\t\t}).then(film=>{\n\t\t\t$scope.film = film;\n\t\t}).catch(err=>{\n\t\t\tconsole.error(err);\n\t\t});\n\n\t\tsetupBars();\n\t}\n\n\tfunction setupBars() {\n\t\tlet mc = new Hammer($element[0]);\n\t\tmc.on(\"tap\",evt=>{\n\t\t\tlet frame = $(evt.target).closest(\".frame-bottom\");\n\t\t\tif(frame.length) {\n\t\t\t\tif(frame.is(\".hide-down\"))\n\t\t\t\t\tframe.removeClass(\"hide-down\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$(\".frame-bottom\",$element).each((i,el)=>{\n\t\t\t\t\tif(!$(el).is((\".hide-down\")))\n\t\t\t\t\t\t$(el).addClass(\"hide-down\");\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction resetBuffers() {\n\t\t$scope.scene.items.forEach(item => {\n\t\t\titem.buffer.splice(0,item.buffer.length);\n\t\t});\n\t}\n\n\tfunction startRecord() {\n\t\tresetBuffers();\n\t\tsoundService.startRecord(\"test\");\n\t\t$scope.time = 0;\n\t\tvar ti = Date.now();\n\t\trecordTimeout = $interval(()=>{\n\t\t\tvar tn = Date.now() - ti;\n\t\t\t$scope.time = tn*100/MAX_TIME;\n\t\t\tif(tn>=MAX_TIME) stopRecord();\n\t\t},1000);\n\t}\n\n\tfunction stopRecord() {\n\t\tsoundService.stopRecord(\"test\");\n\t\t$scope.record = false;\n\t\t$interval.cancel(recordTimeout);\n\n\t\treturn screenshotService.take(elemScene,100,100).\n\t\t\tthen(img=>$scope.scene.screenshot=img).\n\t\t\tthen(()=>$scope.scene.save()).\n\t\t\tthen(()=>$scope.film.update($scope.scene,true)).\n\t\t\tcatch(err=>console.error(err));\n\t}\n\n\t$scope.newScene = function() {\n\t\t$scope.film.add({name:\"New Scene\"}).\n\t\t\tthen(scene=>$scope.scene = scene);\n\t}\n\n\t$scope.setBackground = function(item) {\n\t\tif(!$scope.record)\n\t\t\t$scope.scene.background = item;\n\t}\n\n\t$scope.addItem = function(item) {\n\t\tif(!$scope.addDisabled) {\n\t\t\titem = JSON.parse(JSON.stringify(item));\n\t\t\titem.eid = `ppgm_item_${Date.now()}`;\n\t\t\t$scope.scene.items.push(item);\n\t\t}\n\t}\n\n\t$scope.overlaps = function(eid) {\n\t\tif(eid!=$scope.overlapItem) {\n\t\t\t$scope.overlapItem = eid;\n\t\t}\n\t}\n\n\t$scope.itemDropped = function(eid) {\n\t\tlet eitem = $scope.overlapItem;\n\t\tif(eitem && eid==eitem) {\n\t\t\tlet idx = $scope.scene.items.findIndex(item=>item.eid==eid);\n\t\t\tif(idx>=0) {\n\t\t\t\t$scope.overlapItem = null;\n\t\t\t\t$scope.scene.items.splice(idx,1);\n\t\t\t\tstyleService.remove(eid);\n\t\t\t}\n\t\t}\n\t}\n\n\t$scope.toggleRecord = function() {\n\t\t$scope.record = !$scope.record;\n\n\t\tif($scope.record)\tstartRecord();\n\t\telse stopRecord()\n\t}\n\n\t$scope.togglePlay = function() {\n\t\t$scope.play = $scope.play? 0 : -1;\n\t\tif($scope.play>=0) soundService.play(\"test\");\n\t\telse soundService.stop();\n\t}\n\n\t$scope.selectScene = function(scene) {\n\t\tscene.fetch().then(res=>$scope.scene = res);\n\t}\n\n\t$scope.backScene = function() {\n\t\tstopRecord().then(()=>{\n\t\t\t$scope.play = -1;\n\t\t\t$scope.scene = null;\n\t\t\tstyleService.clean();\n\t\t});\n\t}\n\n\tinit();\n});\n","angular.module('ppgmaker').directive(\"ppgCarousel\",function($timeout,styleService){\n\tvar uid = 0;\n\n\tfunction link(scope, element, attrs) {\n\t\tscope.$watchCollection(()=>{\n\t\t\treturn scope.$eval(element.attr(\"ppg-carousel\"));\n\t\t},items=>{\n\t\t\tif(items && items.length) {\n\t\t\t\t$timeout(()=>{\n\t\t\t\t\t$(element).slick({\n\t\t\t\t\t\tmobileFirst : true,\n\t\t\t\t\t\tarrows: false,\n\t\t\t\t\t\tslidesToScroll: 5,\n\t\t\t\t\t\tvariableWidth: true,\n\t\t\t\t\t\tinfinite: false\n\t\t\t\t\t});\n\t\t\t\t},10);\n\t\t\t}\n\t\t});\n\n\t\tscope.$on(\"destroy\",()=>{\n\t\t\t$(element).slick('unslick');\n\t\t})\n\t}\n\n\treturn {\n\t\tlink : link,\n\t}\n});\n","angular.module('ppgmaker').directive(\"ppgDraggable\",function(styleService) {\n\tconst\n\t\tDRG = \"hammer_drag\",\n\t\tBOX = \"hammer_drag_box\";\n\n\tfunction handleDrag(ev,scope) {\n\t\tvar elem = $(ev.target);\n\n\t\tif (!elem.data(DRG)) {\n\t\t\telem.data(DRG,elem.position());\n\t\t\telem.data(BOX,elem[0].getBoundingClientRect());\n\t\t}\n\n\t\tvar oldPos = elem.data(DRG);\n\t\tvar box = elem.data(BOX);\n\t\tvar posX = ev.deltaX + oldPos.left;\n\t\tvar posY = ev.deltaY + oldPos.top;\n\t\tposX = Math.min(Math.max(0,posX),window.innerWidth-box.width);\n\t\tposY = Math.min(Math.max(0,posY),window.innerHeight-box.height);\n\t\tvar newPos = {left:posX,top:posY};\n\t\telem.css(newPos);\n\t\tstyleService.set(elem,newPos);\n\n\t\tif (ev.isFinal) {\n\t\t\telem.data(DRG,null);\n\t\t\telem.data(BOX,null);\n\t\t\tscope.$eval(elem.attr(\"on-ppg-drop\"))(elem.attr(\"id\"));\n\t\t\tscope.$apply();\n\t\t}\n\t}\n\n\tfunction link(scope,elem,attrs) {\n\t\tvar mc = new Hammer(elem[0]);\n\t\tmc.add( new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 0 }) );\n\t\tmc.on(\"pan\",ev=>handleDrag(ev,scope));\n\t}\n\n\treturn {\n\t\tlink : link\n\t}\n});\n","angular.module('ppgmaker').directive(\"ppgEffects\",function(styleService){\n\tvar max = 360;\n\tvar frame = 0;\n\tvar uid = 0;\n\tvar items = {};\n\tvar frames = [];\n\n\tfunction init() {\n\t\tfor(var i=0;i<max;i++) {\n\t\t\tframes[i] = Math.sin(i*Math.PI/180) - 0.5;\n\t\t}\n\n\t\tframes.push(frames[0]);\n\t\tfor(var i=0;i<max;i++) {\n\t\t\tframes[i] = frames[(i+1)%(max+1)] - frames[i];\n\t\t}\n\t\tframes.pop();\n\t}\n\n\tfunction applyEffects() {\n\t\trequestAnimationFrame(applyEffects);\n\t\tfor(var id in items) {\n\t\t\tvar item = items[id];\n\t\t\tvar play = item.scope.$eval(\"play\");\n\t\t\tif(play<0) {\n\t\t\t\tvar elem = $(item.element.get(0));\n\t\t\t\tvar pos = elem.position();\n\t\t\t\tpos.top += frames[(frame+item.initial)%max]*10;\n\t\t\t\telem.css(pos);\n\t\t\t\tstyleService.set(elem,pos);\n\t\t\t}\n\t\t}\n\t\tframe = (frame+5) % max;\n\t}\n\n\tfunction link(scope, element, attrs) {\n\t\tvar id = \"drag_\"+(uid++);\n\n\t\tscope.$on(\"$destroy\",function(){\n\t\t\tdelete items[id];\n\t\t});\n\n\t\titems[id] = {\n\t\t\tinitial:Math.floor(Math.random()*max),\n\t\t\tscope:scope,\n\t\t\telement:element,\n\t\t};\n\t}\n\n\tinit();\n\trequestAnimationFrame(applyEffects);\n\treturn {\n\t\tlink : link,\n\t}\n});\n","angular.module('ppgmaker').directive(\"ppgFlip\",function(styleService) {\n\tconst CLASS = \"ppg-flip-style\";\n\n\tfunction handleTap(ev) {\n\t\tvar elem = $(ev.target);\n\t\telem.toggleClass(CLASS);\n\n\t\tlet flip = elem.is(`.${CLASS}`)? \"scaleX(-1)\" : \"none\";\n\t\tlet tr = {transform:flip};\n\t\tstyleService.set(elem,tr);\n\t\telem.css(tr);\n\t}\n\n\tfunction link(scope,elem,attrs) {\n\t\tvar mc = new Hammer(elem[0]);\n\t\tmc.on(\"tap\", handleTap);\n\t}\n\n\treturn {\n\t\tlink : link\n\t}\n});\n","angular.module('ppgmaker').directive(\"ppgOverlap\",function(styleService) {\n\tfunction overlap(rect1,rect2) {\n\t\treturn !(\n\t\t\trect1.right <= rect2.left ||\n\t\t\trect1.left >= rect2.right ||\n\t\t\trect1.bottom <= rect2.top ||\n\t\t\trect1.top >= rect2.bottom\n\t\t);\n\t}\n\n\tfunction link(scope,elem,attrs) {\n\t\tlet box = elem[0].getBoundingClientRect();\n\t\tlet fn = function() {\n\t\t\trequestAnimationFrame(fn);\n\t\t\tif(scope.disabled) return;\n\t\t\tlet model = styleService.model;\n\t\t\tlet oid = null;\n\t\t\tlet ret = Object.keys(model).some(id=>{\n\t\t\t\tlet elem = document.getElementById(id);\n\t\t\t\tif(!elem) return false;\n\t\t\t\tlet ebox = elem.getBoundingClientRect();\n\t\t\t\treturn overlap(box,ebox) && (oid = id);\n\t\t\t});\n\t\t\tif(ret) $(elem).addClass(\"overlap\");\n\t\t\telse $(elem).removeClass(\"overlap\");\n\t\t\tscope.onOverlap({item:oid});\n\t\t}\n\t\tfn();\n\t}\n\n\treturn {\n\t\tlink : link,\n\t\tscope : {\n\t\t\tppgOverlap : \"=\",\n\t\t\tdisabled : \"=\",\n\t\t\tonOverlap : \"&\"\n\t\t}\n\t}\n});\n","angular.module('ppgmaker').directive(\"ppgPlay\",function(styleService) {\n\tvar containers = {};\n\n\tfunction animate() {\n\t\trequestAnimationFrame(animate);\n\t\tObject.values(containers).forEach(data=>{\n\t\t\tlet scope = data.scope, items = data.items;\n\t\t\tfor(let key in items) {\n\t\t\t\tlet item = items[key];\n\t\t\t\tif(item.frame>=0) {\n\t\t\t\t\tlet style = item.buffer[item.frame];\n\t\t\t\t\tif(style) {\n\t\t\t\t\t\t$(item.elem).css(style);\n\t\t\t\t\t\titem.frame++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\titem.frame = -1;\n\t\t\t\t\t\tscope.ppgPlay = -1;\n\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction getId(el) {\n\t\tif(!el.attr(\"id\")) el.attr(\"id\",\"ppgplay_\"+(uid++));\n\t\treturn el.attr(\"id\");\n\t}\n\n\tfunction link(scope,element,attrs) {\n\t\tif(!element.attr(\"id\")) {\n\t\t\telement.attr(\"id\",`ppg-play-${Math.random()}`);\n\t\t}\n\n\t\tlet eid = element.attr(\"id\");\n\t\tcontainers[eid] = containers[eid] || {scope:scope,items:[]};\n\t\tlet items = containers[eid].items;\n\n\t\tscope.$watch(\"ppgPlay\",function(frame) {\n\t\t\tvar elems = document.querySelectorAll(\"[ppg-record]\",element);\n\t\t\telems.forEach(function(el){\n\t\t\t\tel = angular.element(el);\n\t\t\t\tvar id = styleService.id(el);\n\t\t\t\tvar buffer = el.scope().$eval(el.attr(\"ppg-record\"));\n\t\t\t\titems[id] = {frame:frame, elem:el, buffer:buffer}\n\t\t\t});\n\t\t});\n\n\t\tscope.$on(\"$destroy\",function(){\n\t\t\tdelete containers[eid];\n\t\t});\n\t}\n\n\trequestAnimationFrame(animate);\n\treturn {\n\t\tlink : link,\n\t\tscope : {\n\t\t\tppgPlay : \"=\"\n\t\t}\n\t}\n});\n","angular.module('ppgmaker').directive(\"ppgRecord\",function($interval,styleService){\n\tvar uid = 0;\n\tvar items = {};\n\n\tfunction diff(prev,next) {\n\t\tif(!prev) return next;\n\n\t\tvar map = new Set();\n\t\tvar ret = {};\n\n\t\tObject.keys(prev).forEach(k=>map.add(k));\n\t\tObject.keys(next).forEach(k=>map.add(k));\n\t\tArray.from(map).forEach(k=>{\n\t\t\tlet pk = prev[k], nk = next[k];\n\t\t\tif(\t(pk===undefined && nk!==undefined) ||\n\t\t\t\t\t(pk!==undefined && nk!==undefined && pk!=nk) ) {\n\t\t\t\tret[k] = nk;\n\t\t\t}\n\t\t});\n\t\treturn ret;\n\t}\n\n\tfunction recordItems() {\n\t\trequestAnimationFrame(recordItems);\n\t\tfor(var id in items) {\n\t\t\tvar item = items[id];\n\t\t\tvar record = item.scope.$eval(\"record\");\n\t\t\tif(record) {\n\t\t\t\tvar next = styleService.get(item.element);\n\t\t\t\tvar prev = item.buffer[item.buffer.length-1] || undefined;\n\t\t\t\titem.buffer.push(diff(prev,next));\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction link(scope, element, attrs) {\n\t\tvar id = \"drag_\"+(uid++);\n\t\tvar buffer = scope.$eval(attrs.ppgRecord);\n\n\t\tif(!buffer) buffer = [];\n\t\tif(buffer.length)\n\t\t\t$(element).css(buffer[0]);\n\n\t\tscope.$on(\"$destroy\",function(){\n\t\t\tdelete items[id];\n\t\t});\n\n\t\titems[id] = {\n\t\t\tscope:scope,\n\t\t\telement:element,\n\t\t\tbuffer:buffer\n\t\t};\n\t}\n\n\trequestAnimationFrame(recordItems);\n\treturn {\n\t\tlink : link,\n\t}\n});\n","angular.module('ppgmaker').directive(\"ppgResizable\",function(styleService) {\n\tvar DRG = \"hammer_drag\";\n\n\tfunction handleDrag(ev) {\n\t\tvar elem = $(ev.target);\n\n\t\tif (!elem.data(DRG)) {\n\t\t\telem.data(DRG,elem.position());\n\t\t}\n\n\t\tvar oldPos = elem.data(DRG);\n\t\tvar posX = ev.deltaX + oldPos.left;\n\t\tvar posY = ev.deltaY + oldPos.top;\n\t\tvar newPos = {left:posX,top:posY};\n\n\t\telem.css(newPos);\n\t\tstyleService.set(elem,newPos);\n\n\t\tif (ev.isFinal) {\n\t\t\telem.data(DRG,null);\n\t\t}\n\t}\n\n\tfunction link(scope,elem,attrs) {\n\t\tvar mc = new Hammer(elem[0]);\n\t\tmc.add( new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 0 }) );\n\t\tmc.on(\"pan\", handleDrag);\n\t}\n\n\treturn {\n\t\tlink : link\n\t}\n});\n","angular.module(\"ppgmaker\").\nfilter(\"imgsrc\",function(){\n\treturn function(input,size) {\n\t\tlet src = input.src;\n\t\tif(input[size]) {\n\t\t\tlet path = src.split(\"/\");\n\t\t\tlet file = path.pop();\n\t\t\tpath.push(input[size]);\n\t\t\tpath.push(file);\n\t\t\treturn path.join(\"/\");\n\t\t}\n\t\telse {\n\t\t\treturn input.src;\n\t\t}\n\t}\n});\n","angular.module(\"ppgmaker\").provider(\"template\",function(){\n\tthis.films = \"<div class=\\\"row\\\" style=\\\"height:50px\\\">\\n\\t<div class=\\\"col-lg-12\\\" style=\\\"position:fixed;width:100%;z-index:1000;\\\">\\n\\t\\t<h2 class=\\\"pull-left\\\" style=\\\"margin-left:20px\\\"><a href=\\\"#\\\" ui-sref=\\\"film({id:'new'})\\\" tooltip=\\\"New Film\\\"><i class=\\\"fa fa-plus-circle\\\"></i></a></h2>\\n\\t\\t<h2 class=\\\"pull-right\\\" style=\\\"margin-right:20px\\\"><a href=\\\"#\\\" ui-sref=\\\"settings()\\\" tootltip=\\\"Settings\\\"><i class=\\\"fa fa-cog\\\"></i></a></h2>\\n\\t</div>\\n</div>\\n\\n<ul class=\\\"film-list\\\">\\n\\t<li ng-repeat=\\\"film in films\\\">\\n\\t\\t<h3>\\n\\t\\t\\t<a href=\\\"#\\\" ui-sref=\\\"film({id:film._id})\\\">{{film.name}}<a>\\n\\t\\t\\t<a href=\\\"#\\\" ui-sref=\\\"player({id:film._id})\\\"><i class=\\\"fa fa-play\\\"></i></a>\\n\\t\\t</h3>\\n\\t\\t<div class=\\\"film-scenes\\\" ppg-carousel=\\\"film.scenes\\\">\\n\\t\\t\\t<img ng-repeat=\\\"scene in film.scenes\\\"\\n\\t\\t\\t\\tui-sref=\\\"film({id:film._id})\\\"\\n\\t\\t\\t\\tng-src=\\\"{{scene.screenshot||'img/web/scene001.jpg'}}\\\"/>\\n\\t\\t</div>\\n\\t</li>\\n</ul>\\n\";\n\tthis.player = \"<!-- Scene -->\\n<div class=\\\"fill scene\\\">\\n\\t<div class=\\\"element-container fill\\\" ppg-play=\\\"play\\\" style=\\\"background-image:url('{{scene.background.src}}')\\\">\\n\\t\\t<button class=\\\"btn btn-primary\\\" ui-sref=\\\"films()\\\">Stop</button>\\n\\t\\t<img ng-repeat=\\\"item in scene.items\\\"\\n\\t\\t\\tid=\\\"{{item.eid}}\\\"\\n\\t\\t\\tclass=\\\"element\\\"\\n\\t\\t\\tppg-record=\\\"item.buffer\\\"\\n\\t\\t\\tplay=\\\"play\\\"\\n\\t\\t\\tng-src=\\\"{{item | imgsrc:'xl'}}\\\" />\\n\\t</div>\\n</div>\\n\";\n\tthis.scene = \"<!-- Top buttons -->\\n<div class=\\\"frame frame-top orange cover\\\" ng-class=\\\"{transparent:record}\\\">\\n\\t<div class=\\\"row\\\">\\n\\t\\t<form class=\\\"form-inline\\\">\\n\\t\\t\\t<div class=\\\"form-group\\\">\\n\\t\\t\\t\\t<a class=\\\"action\\\" ui-sref=\\\"films()\\\"><i class=\\\"fa fa-home\\\"></i></a>\\n\\t\\t\\t\\t<a class=\\\"action danger\\\" ng-show=\\\"scene\\\" ng-click=\\\"toggleRecord()\\\"><i class=\\\"fa\\\" ng-class=\\\"{'fa-circle':!record,'fa-pause':record}\\\"></i></a>\\n\\t\\t\\t\\t<a class=\\\"action\\\" ng-show=\\\"scene\\\" ng-click=\\\"togglePlay()\\\"><i class=\\\"fa\\\" ng-class=\\\"{'fa-play':play<0,'fa-stop':play>=0}\\\"></i></a>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"form-group\\\" ng-show=\\\"scene\\\">\\n\\t\\t\\t\\t<uib-progressbar style=\\\"width:300px\\\" class=\\\"progress-bar-danger progress-big active\\\" value=\\\"time\\\" type=\\\"success\\\"></uib-progressbar>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"form-group\\\" ng-show=\\\"scene\\\">\\n\\t\\t\\t\\t<a class=\\\"action\\\" ng-click=\\\"backScene()\\\"><i class=\\\"fa fa-reply\\\"></i></a>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"form-group\\\" ng-show=\\\"!scene\\\">\\n\\t\\t\\t\\t<a class=\\\"action\\\" ng-click=\\\"newScene()\\\"><i class=\\\"fa fa-plus\\\"></i></a>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"form-group\\\" ng-show=\\\"!scene\\\" style=\\\"width:50%\\\">\\n\\t\\t\\t\\t<div ng-if=\\\"film.scenes.length && !scene\\\" ppg-carousel=\\\"film.scenes\\\">\\n\\t\\t\\t\\t\\t<img ng-repeat=\\\"scene in film.scenes track by scene._id\\\"\\n\\t\\t\\t\\t\\tng-src=\\\"{{scene.screenshot||'img/web/scene001.jpg'}}\\\"\\n\\t\\t\\t\\t\\talt=\\\"{{scene.name}}\\\"\\n\\t\\t\\t\\t\\tstyle=\\\"margin-right:5px;height:34px\\\"\\n\\t\\t\\t\\t\\tng-click=\\\"selectScene(scene)\\\"/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</form>\\n\\t</div>\\n</div>\\n\\n<!-- Item selector -->\\n<uib-tabset active=\\\"active\\\" class=\\\"frame frame-bottom pink\\\">\\n\\t<uib-tab index=\\\"-1\\\" heading=\\\"Places\\\">\\n\\t\\t<div style=\\\"padding:10px\\\" ppg-carousel=\\\"allitems.backgrounds.items\\\">\\n\\t\\t\\t<img ng-repeat=\\\"bg in allitems.backgrounds.items\\\"\\n\\t\\t\\tclass=\\\"item\\\"\\n\\t\\t\\tng-class=\\\"{disabled:record}\\\"\\n\\t\\t\\tng-src=\\\"{{bg.src}}\\\"\\n\\t\\t\\tstyle=\\\"margin-right:5px\\\"\\n\\t\\t\\tng-click=\\\"setBackground(bg)\\\"/>\\n\\t\\t</div>\\n\\t</uib-tab>\\n\\t<uib-tab ng-repeat=\\\"section in allitems.sections\\\" index=\\\"$index\\\">\\n\\t\\t<uib-tab-heading>{{section.id}}</uib-tab-heading>\\n\\t\\t<div style=\\\"padding:10px\\\" ppg-carousel=\\\"section.items\\\">\\n\\t\\t\\t<img ng-repeat=\\\"item in section.items\\\"\\n\\t\\t\\tclass=\\\"item\\\"\\n\\t\\t\\tng-class=\\\"{disabled:addDisabled || record}\\\"\\n\\t\\t\\tng-src=\\\"{{item | imgsrc:'sm'}}\\\"\\n\\t\\t\\tstyle=\\\"margin-right:5px\\\"\\n\\t\\t\\tng-click=\\\"addItem(item)\\\"/>\\n\\t\\t</div>\\n\\t</uib-tab>\\n</uib-tabset>\\n\\n<!-- Scene -->\\n<div class=\\\"fill scene\\\">\\n\\t<div class=\\\"element-container fill\\\" ppg-play=\\\"play\\\" style=\\\"background-image:url('{{scene.background.src}}')\\\">\\n\\t\\t<div class=\\\"trash-container\\\" ppg-overlap=\\\"film.scenes\\\">\\n\\t\\t\\t<a class=\\\"action trash-can\\\" ppg-overlap=\\\"film.scenes\\\" on-overlap=\\\"overlaps(item)\\\"><i class=\\\"fa fa-trash\\\"></i></a>\\n\\t\\t</div>\\n\\t\\t<img ng-repeat=\\\"item in scene.items\\\"\\n\\t\\t\\tid=\\\"{{item.eid}}\\\"\\n\\t\\t\\tclass=\\\"element\\\"\\n\\t\\t\\tppg-draggable\\n\\t\\t\\tppg-flip\\n\\t\\t\\tppg-record=\\\"item.buffer\\\"\\n\\t\\t\\tppg-effects=\\\"item.effects\\\"\\n\\t\\t\\ton-ppg-drop=\\\"itemDropped\\\"\\n\\t\\t\\trecord=\\\"record\\\" play=\\\"play\\\"\\n\\t\\t\\tng-src=\\\"{{item | imgsrc:'xl'}}\\\" />\\n\\t</div>\\n</div>\\n\"\n\n\tthis.$get = function() {\n\t\treturn this;\n\t}\n});\n","angular.module(\"ppgmaker\").service(\"itemsService\",function($http){\n\tvar prModel = false;\n\tvar self = this;\n\n\tthis.model = {};\n\n\tthis.get = function() {\n\t\tif(!prModel) {\n\t\t\tprModel = $http.\n\t\t\t\tget(\"data/allitems.json\").\n\t\t\t\tthen(function(res){\n\t\t\t\t\tangular.extend(self.model,res.data);\n\t\t\t\t\treturn self.model;\n\t\t\t\t});\n\t\t}\n\t\treturn prModel;\n\t}\n});\n","angular.module(\"ppgmaker\").service(\"sceneService\",function($q){\n\tvar self = this;\n\tvar filmCol, sceneCol;\n\n\tthis.model = {};\n\n\tfunction q() {\n\t\treturn $q.resolve($q);\n\t}\n\n\tfunction del(id) {\n\t\treturn {_id:id,_deleted:true}\n\t}\n\n\tclass Scene {\n\t\tconstructor(props,mini) {\n\t\t\tthis.extend(props,mini);\n\t\t}\n\n\t\textend(props,mini) {\n\t\t\tprops = props || {};\n\t\t\tthis._id = props._id || \"scene_\"+Date.now();\n\t\t\tthis._rev = props._rev;\n\t\t\tthis.name = props.name || \"\";\n\t\t\tthis.frames = props.frames || 0;\n\t\t\tthis.background = props.background || \"\";\n\t\t\tthis.screenshot = props.screenshot || \"\";\n\n\t\t\tif(!mini) {\n\t\t\t\tthis.sound = props.sound || null;\n\t\t\t\tthis.items = props.items || [];\n\t\t\t\tthis.idfilm = props.idfilm || \"\";\n\t\t\t}\n\n\t\t\tif(this.items) {\n\t\t\t\tlet now = Date.now();\n\t\t\t\tthis.items.forEach(item=>{\n\t\t\t\t\titem.eid = item.eid || `ppgm_item_${now++}`;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tmini() {\n\t\t\treturn new Scene(this,true);\n\t\t}\n\n\t\tfetch() {\n\t\t\treturn q().then(()=>sceneCol.get(this._id)).then(res=>new Scene(res));\n\t\t}\n\n\t\tsave() {\n\t\t\treturn q().then(()=>sceneCol.put(this)).then(res=>this);\n\t\t}\n\n\t\tremove() {\n\t\t\treturn q().then(()=>sceneCol.remove(this)).then(res=>this);\n\t\t}\n\t}\n\n\tclass Film {\n\t\tconstructor(props) {\n\t\t\tprops = props || {};\n\t\t\tthis._id = props._id || \"film_\"+Date.now();\n\t\t\tthis._rev = props._rev;\n\t\t\tthis.name = props.name || \"\";\n\t\t\tthis.scenes = (props.scenes || []).map(scn=>new Scene(scn,true));\n\t\t}\n\n\t\tfind(scene) {\n\t\t\tlet id = scene._id || scene;\n\t\t\treturn q().then(()=>this.scenes.find(scn=>scn._id==id));\n\t\t}\n\n\t\tadd(scene) {\n\t\t\tscene = scene || {};\n\t\t\tscene.idfilm = this._id;\n\t\t\tif(!scene._id) scene = new Scene(scene);\n\n\t\t\treturn q().\n\t\t\t\tthen(()=>scene.save()).\n\t\t\t\tthen(scene=>{\n\t\t\t\t\tthis.scenes.push(scene.mini());\n\t\t\t\t\treturn this.save();\n\t\t\t\t}).\n\t\t\t\tthen(res=>scene);\n\t\t}\n\n\t\tremove(scene) {\n\t\t\treturn q().\n\t\t\t\tthen(()=>scene.remove()).\n\t\t\t\tthen(scene=>{\n\t\t\t\t\tlet idx = this.scenes.findIndex(scn=>scn._id==scene._id);\n\t\t\t\t\tthis.scenes.splice(idx,1);\n\t\t\t\t\treturn this.save();\n\t\t\t\t}).\n\t\t\t\tthen(res=>scene);\n\t\t}\n\n\t\tupdate(scene,save) {\n\t\t\treturn q().\n\t\t\t\t\tthen(()=>this.find(scene)).\n\t\t\t\t\tthen(old=>old.extend(scene,true)).\n\t\t\t\t\tthen(()=>{\n\t\t\t\t\t\tif(save) return this.save();\n\t\t\t\t\t\telse return this;\n\t\t\t\t\t});\n\t\t}\n\n\t\tsave() {\n\t\t\tthis.scenes = this.scenes.map(scn=>scn.mini());\n\t\t\treturn q().then(()=>filmCol.put(this)).then(res=>this);\n\t\t}\n\n\t\tdrop() {\n\t\t\treturn q().\n\t\t\t\tthen(()=>sceneCol.bulkDocs(this.idscenes.map(del))).\n\t\t\t\tthen(res=>filmCol.remove(this)).\n\t\t\t\tthen(res=>this);\n\t\t}\n\t}\n\n\tfunction init() {\n\t\tfilmCol = new PouchDB('ppgmaker_films');\n\t\tsceneCol = new PouchDB('ppgmaker_scenes');\n\t}\n\n\tthis.newFilm = function(film) {\n\t\treturn new Film(film);\n\t}\n\n\tthis.allFilms = function() {\n\t\treturn q().\n\t\t\tthen(()=>filmCol.allDocs({include_docs: true})).\n\t\t\tthen(list=>list.rows.map(elem=>elem.doc)).\n\t\t\tthen(docs=>docs.filter(doc=>doc.name)).\n\t\t\tthen(docs=>docs.map(doc=>new Film(doc)));\n\t}\n\n\tthis.getFilm = function(id) {\n\t\treturn q().\n\t\t\tthen(()=>filmCol.get(id)).\n\t\t\tthen(film=>new Film(film));\n\t}\n\n\tthis.findFilm = function(query) {\n\t\treturn q().\n\t\t\tthen(()=>filmCol.createIndex({index: {fields: ['name']}})).\n\t\t\tthen(res => filmCol.find({selector: query})).\n\t\t\tthen(res => res.docs[0]).\n\t\t\tthen(film => film? new Film(film) : null);\n\t}\n\n\tthis.newScene = function(film,scene) {\n\t\tscene = scene || {};\n\t\tscene.idfilm = film.id;\n\t\treturn new Scene(scene);\n\t}\n\n\tinit();\n});\n","angular.module(\"ppgmaker\").service(\"screenshotService\",function($q){\n\tvar canvas = document.createElement(\"canvas\");\n\n\tthis.take = function(elem,w,h) {\n\t\tif(window.isCordova) return takeCordova(elem,w,h);\n\t\telse return takeBrowser(elem,w,h);\n\t}\n\n\tfunction resizeImage(img,h) {\n\t\tlet ctx = canvas.getContext('2d');\n\t\tcanvas.height = h;\n\t\tcanvas.width = img.width*canvas.height/img.height;\n\t\tctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\t\treturn canvas.toDataURL();\n\t}\n\n\tfunction takeBrowser(elemScene,w,h) {\n\t\treturn $q(res=>html2canvas(elemScene,{onrendered:res})).\n\t\t\tthen(canvas=>resizeImage(canvas,h));\n\t}\n\n\tfunction takeCordova(elem,w,h) {\n\t\tlet quality = '80';\n\t\tlet defer = $q.defer();\n\n\t\tnavigator.screenshot.URI((error, res) => {\n\t\t\tif (error) defer.reject(error);\n\t\t\telse defer.resolve(res.URI);\n\t\t}, quality);\n\n\t\treturn defer.promise;\n\t}\n});\n","angular.module(\"ppgmaker\").service(\"soundService\",function($q){\n\tvar media, src;\n\n\tthis.startRecord = function(id) {\n\t\treturn $q((resolve,reject)=>{\n\t\t\tlet src = `${id}.wav`;\n\t    media = new Media(src,resolve,reject);\n\t\t\tmedia.startRecord();\n\t\t}).finally(()=>media.release());\n\t}\n\n\tthis.stopRecord = function() {\n\t\tmedia.stopRecord();\n\t}\n\n\tthis.pauseRecord = function() {\n\t\tmedia.pauseRecord();\n\t}\n\n\tthis.resumeRecord = function() {\n\t\tmedia.resumeRecord();\n\t}\n\n\tthis.play = function(id) {\n\t\treturn $q((resolve,reject)=>{\n\t\t\tlet src = `${id}.wav`;\n\t    media = new Media(src,resolve,reject);\n\t\t\tmedia.play();\n\t\t}).finally(()=>media.release());\n\t}\n\n\tthis.pause = function() {\n\t\tmedia.pause();\n\t}\n\n\tthis.stop = function() {\n\t\tmedia.stop();\n\t}\n});\n","angular.module(\"ppgmaker\").service(\"styleService\",function(){\n\tvar self = this;\n\tvar uid = 0;\n\n\tthis.model = {};\n\n\tfunction elemId(elem) {\n\t\tif(typeof(elem)==\"string\") return elem;\n\t\telse {\n\t\t\telem = $(elem);\n\t\t\tif(!elem.attr(\"id\"))\n\t\t\t\telem.attr(\"id\",\"_ppgm_\"+(uid++));\n\t\t\treturn elem.attr(\"id\");\n\t\t}\n\t}\n\n\tthis.id = function(elem) {\n\t\treturn elemId(elem);\n\t}\n\n\tthis.get = function(id) {\n\t\tid = elemId(id);\n\t\treturn angular.extend({},this.model[id] || {});\n\t}\n\n\tthis.set = function(id,props) {\n\t\tid = elemId(id);\n\t\tif(!this.model[id]) this.model[id] = {};\n\t\tangular.extend(this.model[id],props);\n\t}\n\n\tthis.unset = function(id,props) {\n\t\tid = elemId(id);\n\t\tif(this.model[id]) {\n\t\t\tvar style = this.model[id];\n\t\t\tfor(var i in props) {\n\t\t\t\tdelete style[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.remove = function(id) {\n\t\tid = elemId(id);\n\t\tdelete this.model[id];\n\t}\n\n\tthis.clean = function() {\n\t\tObject.keys(this.model).forEach(k=>{\n\t\t\tdelete this.model[k];\n\t\t});\n\t}\n});\n"]}